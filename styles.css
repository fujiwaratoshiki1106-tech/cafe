:root{
  --bg:#f6f7fb; --card:#fff; --ink:#0f172a; --muted:#64748b;
  --brand:#1d4ed8; --brand-ink:#fff; --border:#e5e7eb; --warn:#ef4444;
  --radius:14px; --shadow:0 6px 20px rgba(2,6,23,.06);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  color:var(--ink); background:linear-gradient(180deg,#f6f7fb, #eef2ff 60%, #f6f7fb);
}
.header{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; background:#fff8; backdrop-filter: blur(10px);
  border-bottom:1px solid var(--border);
}
.app-title{margin:0; font-size:18px; letter-spacing:.5px}
.nav{display:flex; gap:8px; align-items:center}
.btn{
  border:1px solid var(--border); background:#fff; color:var(--ink);
  padding:8px 12px; border-radius:10px; cursor:pointer; transition:.15s transform ease;
}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:var(--brand); color:var(--brand-ink); border-color:transparent}
.btn.ghost{background:transparent}
.btn.warn{background:var(--warn); color:#fff; border-color:transparent}
.file{display:inline-flex; align-items:center; gap:6px; border:1px solid var(--border); padding:8px 12px; border-radius:10px; background:#fff; cursor:pointer}
.file input{display:none}

.container{max-width:980px; margin:24px auto; padding:0 16px}
.card{
  background:var(--card); border:1px solid var(--border); border-radius: var(--radius);
  box-shadow:var(--shadow); padding:16px;
}
.grid{display:grid; gap:12px}
.grid.cols-2{grid-template-columns: repeat(2, 1fr)}
.grid.cols-3{grid-template-columns: repeat(3, 1fr)}
@media (max-width: 760px){ .grid.cols-2,.grid.cols-3{grid-template-columns:1fr} }

.controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:14px}
.input, .select, .textarea{
  width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:#fff
}
.input::placeholder{color:var(--muted)}
.label{font-size:12px; color:var(--muted); margin-bottom:4px}
.section{margin:18px 0}
.group-title{
  margin:20px 0 10px; padding:6px 10px; background:#f8fafc; border:1px solid var(--border);
  border-radius:10px; color:#334155; font-weight:600
}
.list{display:grid; gap:10px}
.item{
  display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:center;
  border:1px solid var(--border); border-radius:12px; background:#fff; padding:12px;
}
.item h3{margin:0; font-size:16px}
.item .meta{font-size:12px; color:var(--muted)}
.item-actions{display:flex; gap:6px}
.tag{font-size:12px; padding:2px 8px; border:1px solid var(--border); border-radius:999px; background:#f8fafc; color:#334155}

footer.footer{
  margin:40px auto 20px; max-width:980px; padding:0 16px; color:var(--muted)
}
.foot-actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
a.link{color:var(--brand); text-decoration:none}
a.link:hover{text-decoration:underline}

.kv{display:grid; gap:8px}
.star{font-size:20px; cursor:pointer; user-select:none}
.star.on{color:#fbbf24}

.inline{display:flex; gap:10px; align-items:center}
.badge{padding:2px 8px; background:#eef2ff; color:#3730a3; border-radius:999px; font-size:12px}
hr.sep{border:none; border-top:1px dashed var(--border); margin:16px 0}
.empty{padding:20px; text-align:center; color:var(--muted)}

/* 既存の定義はそのまま。末尾に以下を追記 */
.tabs{display:flex; gap:6px; border-bottom:1px solid var(--border); margin:-8px -8px 12px; padding:8px}
.tab{
  border:1px solid var(--border); background:#fff; padding:8px 12px; border-radius:10px 10px 0 0;
  cursor:pointer; font-weight:600;
}
.tab.active{background:var(--brand); color:#fff; border-color:var(--brand)}
.tab + .tab{margin-left:4px}
.form-grid{display:grid; gap:12px}
@media (min-width: 760px){ .form-grid{grid-template-columns: repeat(2, 1fr)} }
.col-span-2{grid-column:1/-1}
.help{font-size:12px; color:var(--muted)}

/* iOS判定っぽい条件 + PWA（standalone）での回避 */
@supports (-webkit-touch-callout: none) {
  @media (display-mode: standalone) {
    .header {
      position: static;          /* ← stickyやめる */
      backdrop-filter: none;     /* ← これが特にNGになりがち */
      -webkit-backdrop-filter: none;
      background: #fff;          /* 固定色でOK */
    }
    html, body {
      height: auto;              /* ← 100%固定を外す */
      min-height: 100%;
      overflow-y: auto;          /* 念のためスクロール許可 */
    }
  }
}

